function pre_processor_trailing_doll

global S filelist

warning('off' ,'all');
javaaddpath(which('MatlabGarbageCollector.jar'));
org.dt.matlab.utilities.JavaMemoryCleaner.clear(1);
clc;

S.f = figure('NumberTitle','off','Name','LHV Tool - Pre-processor',...
             'color','w','toolbar','none','menubar','none','Units','Normalized',...
             'Position',[0.2 0.15 0.8 0.75],'visible','off');    
         
dirData = dir('library/tyres');
dirIndex = [dirData.isdir];
filelist = {dirData(~dirIndex).name}';

S.back_button = uicontrol('style','pushbutton',...
                    'BackgroundColor','w',...
                    'String','Back',...
                    'FontSize',10,...
                    'FontUnits','Normalized',...
                    'FontWeight','bold',...
                    'ForeGroundColor','r',...
                    'units','normalized',...
                    'position',[0.005 0.94 0.1 0.05],...
                    'Callback',@Back_callback);
                
S.next_button = uicontrol('style','pushbutton',...
                    'BackgroundColor','w',...
                    'String','Next',...
                    'FontSize',10,...
                    'FontUnits','Normalized',...
                    'FontWeight','bold',...
                    'ForeGroundColor','b',...
                    'units','normalized',...
                    'visible','off',...
                    'position',[0.895 0.94 0.1 0.05],...
                    'Callback',@Next_callback);

S.next_dolly_button = uicontrol('style','pushbutton',...
                    'BackgroundColor','w',...
                    'String','Next',...
                    'FontSize',10,...
                    'FontUnits','Normalized',...
                    'FontWeight','bold',...
                    'ForeGroundColor','b',...
                    'units','normalized',...
                    'visible','off',...
                    'position',[0.895 0.94 0.1 0.05],...
                    'Callback',@Next_dolly_callback);
                
S.panel_axles = uipanel(S.f,'Title','Axles',...
                             'Units','Centimeters',...
                             'Position',[0.1 0.1 26 10],...
                      'FontSize',12,...
                    'FontUnits','Normalized',...
                      'FontWeight','bold',...
                    'visible','off',...
                      'backgroundcolor','w',...
                      'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.dollyaxles_panel = uipanel(S.f,'Title','Axles',...
                             'Units','Centimeters',...
                             'Position',[0.1 0.1 10 10],...
                             'FontSize',12,...
                             'FontUnits','Normalized',...
                             'FontWeight','bold',...
                             'visible','off',...
                             'backgroundcolor','w',...
                             'Units','Normalized',...
                             'BorderWidth',2,...
                             'BorderType','Line',...
                             'highlightcolor','k');
                   
S.axlesnumber_panel = uibuttongroup(S.f,'Title','Trailer: number of axles',...
                                    'Units','Centimeters',...
                                    'Position',[18 6 5 6],...
                                    'FontSize',10,...
                                    'FontWeight','bold',...
                                    'backgroundcolor','w',...
                                    'Units','Normalized',...
                                    'visible','on',...
                                    'FontUnits','Normalized',...
                                    'BorderWidth',2,...
                                    'BorderType','Line',...
                                    'highlightcolor','k');    
                   
S.trailer_axle1_radiobutton = uicontrol(S.axlesnumber_panel,...
                                'Style','radiobutton',...
                                'String','1',...
                                'backgroundcolor','w',...
                                'Units','Normalized',...
                               'FontSize',8,...
                               'Value',0,...
                                'FontUnits','Normalized',...
                                'Position',[0.45 0.75 0.2 0.2]); 
                            
S.trailer_axle2_radiobutton = uicontrol(S.axlesnumber_panel,...
                                'Style','radiobutton',...
                                'String','2',...
                                'backgroundcolor','w',...
                                'Units','Normalized',...
                               'FontSize',8,...
                               'Value',0,...
                                'FontUnits','Normalized',...
                                'Position',[0.45 0.6 0.2 0.2]); 
                   
S.trailer_axle3_radiobutton = uicontrol(S.axlesnumber_panel,...
                                'Style','radiobutton',...
                                'String','3',...
                                'backgroundcolor','w',...
                               'FontSize',8,...
                                'FontUnits','Normalized',...
                                'Value',1,...
                                'Units','Normalized',...
                                'Position',[0.45 0.45 0.2 0.2]); 
      
S.trailer_axle4_radiobutton = uicontrol(S.axlesnumber_panel,...
                                'Style','radiobutton',...
                                'String','4',...
                                'backgroundcolor','w',...
                               'FontSize',8,...
                                'FontUnits','Normalized',...
                                'Value',0,...
                                'Units','Normalized',...
                                'Position',[0.45 0.3 0.2 0.2]); 

S.trailer_axle5_radiobutton = uicontrol(S.axlesnumber_panel,...
                                'Style','radiobutton',...
                                'String','5',...
                                'backgroundcolor','w',...
                               'FontSize',8,...
                                'FontUnits','Normalized',...
                                'Value',0,...
                                'Units','Normalized',...
                                'Position',[0.45 0.15 0.2 0.2]); 

S.axlesnumberdoll_panel = uibuttongroup(S.f,'Title','Dolly: number of axles',...
                                        'Units','Centimeters',...
                                        'Position',[11 6 5 6],...
                                        'FontSize',10,...
                                        'FontWeight','bold',...
                                        'backgroundcolor','w',...
                                        'Units','Normalized',...
                                        'visible','on',...
                                        'FontUnits','Normalized',...
                                        'BorderWidth',2,...
                                        'BorderType','Line',...
                                        'highlightcolor','k'); 
  
S.dollaxle1_radiobutton = uicontrol(S.axlesnumberdoll_panel,...
                                'Style','radiobutton',...
                                'String','1',...
                                'backgroundcolor','w',...
                                'Units','Normalized',...
                               'FontSize',8,...
                               'Value',1,...
                                'FontUnits','Normalized',...
                                'Position',[0.45 0.6 0.2 0.2]); 
                   
S.dollaxle2_radiobutton = uicontrol(S.axlesnumberdoll_panel,...
                                'Style','radiobutton',...
                                'String','2',...
                                'backgroundcolor','w',...
                               'FontSize',8,...
                                'FontUnits','Normalized',...
                                'Value',0,...
                                'Units','Normalized',...
                                'Position',[0.45 0.45 0.2 0.2]); 
                            
S.applyconfig_button = uicontrol('Style','pushbutton',...
                                 'String','Apply',...
                                 'backgroundcolor','w',...
                                 'Units','Normalized',...
                                 'Position',[0.4 0.15 0.2 0.1],...
                                 'FontSize',8,...
                                 'FontUnits','Normalized',...
                                 'FontWeight','bold',...
                                 'Callback',@applynumofaxles_button_call);
                           
S.panel_axle_1 = uipanel(S.panel_axles,'Title','Axle 1',...
                             'Units','Centimeters',...
                             'Position',[0.1 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.panel_axle_2 = uipanel(S.panel_axles,'Title','Axle 2',...
                             'Units','Centimeters',...
                             'Position',[5 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.panel_axle_3 = uipanel(S.panel_axles,'Title','Axle 3',...
                             'Units','Centimeters',...
                             'Position',[10 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.panel_axle_4 = uipanel(S.panel_axles,'Title','Axle 4',...
                             'Units','Centimeters',...
                             'Position',[15 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');
                   
S.panel_axle_5 = uipanel(S.panel_axles,'Title','Axle 5',...
                             'Units','Centimeters',...
                             'Position',[20 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.dolly_axle1_panel = uipanel(S.dollyaxles_panel,'Title','Axle 1',...
                             'Units','Centimeters',...
                             'Position',[0.1 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');

S.dolly_axle2_panel = uipanel(S.dollyaxles_panel,'Title','Axle 2',...
                             'Units','Centimeters',...
                             'Position',[5 0.1 4 9],...
                       'FontSize',10,...
                    'FontUnits','Normalized',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');
                   
S.chassis_panel = uipanel(S.f,'Title','Chassis',...
                             'Units','Centimeters',...
                             'Position',[27 4 4 6],...
                        'FontSize',12,...
                    'FontUnits','Normalized',...
                    'visible','off',...
                        'FontWeight','bold',...
                        'backgroundcolor','w',...
                        'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k'); 
   
S.dollychassis_panel = uipanel(S.f,'Title','Chassis',...
                             'Units','Centimeters',...
                             'Position',[10 0.1 4 9],...
                        'FontSize',12,...
                    'FontUnits','Normalized',...
                    'visible','off',...
                        'FontWeight','bold',...
                        'backgroundcolor','w',...
                        'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');
                   
S.load_panel = uipanel(S.f,'Title','Load',...
                             'Units','Centimeters',...
                             'Position',[27 0.1 4 4],...
                       'FontSize',12,...
                    'FontUnits','Normalized',...
                    'visible','off',...
                       'FontWeight','bold',...
                       'backgroundcolor','w',...
                       'Units','Normalized',...
                       'BorderWidth',2,...
                       'BorderType','Line',...
                       'highlightcolor','k');   
%% Axle 1 dolly

S.dolly_axle1xpos_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                           'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.dolly_axle1xpos_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.dolly_axle1trackwidth_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                 'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle1trackwidth_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1zrollcenter_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                              
S.dolly_axle1zrollcenter_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1yd_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.dolly_axle1yd_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1ys_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.dolly_axle1ys_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1fzstat_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1fzstat_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1mass_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.dolly_axle1mass_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1damper_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1damper_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1spring_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1spring_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1roll_edit = uicontrol(S.dolly_axle1_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 0.09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
                       
S.dolly_axle1roll_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle1tyres_popupmenu = uicontrol(S.dolly_axle1_panel,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                             
S.dolly_axle1tyres_text = uicontrol(S.dolly_axle1_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');                             
%% Axle 2 dolly      

S.dolly_axle2xpos_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2xpos_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2trackwidth_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2trackwidth_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2zrollcenter_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
  
S.dolly_axle2zrollcenter_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2yd_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2yd_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2ys_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2ys_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2fzstat_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2fzstat_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2mass_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
           
S.dolly_axle2mass_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2damper_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
 
S.dolly_axle2damper_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2spring_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2spring_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2roll_edit = uicontrol(S.dolly_axle2_panel,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
 
S.dolly_axle2roll_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.dolly_axle2tyres_popupmenu = uicontrol(S.dolly_axle2_panel,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.dolly_axle2tyres_text = uicontrol(S.dolly_axle2_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');      

%% chassis dolly

S.dolly_chassislenght_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.65 .9 .3 .06],...
                                 'FontSize',7,...
                           'FontUnits','Normalized'); 
                                
S.dolly_chassislenght_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.85 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''G'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_chassisheight_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .8 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.dolly_chassisheight_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.75 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''H'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_chassiswidth_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .7 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.dolly_chassiswidth_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.65 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''I'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_chassismass_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .6 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.dolly_chassismass_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.55 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Mass (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.dolly_ftoconn_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .5 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.dolly_ftoconn_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''J'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 
                         
S.dolly_dbmass_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .4 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 
                              
S.dolly_dbmass_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.35 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Draw bar mass (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                               
                              
S.dolly_connectionxpos_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .3 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 
                              
S.dolly_connectionxpos_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.25 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''M'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                               
                              
S.dolly_connectionzpos_edit = uicontrol(S.dollychassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .2 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');                               

S.dolly_connectionzpos_text = uicontrol(S.dollychassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.15 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''N'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                            
                       
%% Axle 1

S.trailer_axle1xpos_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                           'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle1xpos_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle1trackwidth_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                 'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle1trackwidth_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1zrollcenter_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                              
S.trailer_axle1zrollcenter_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1yd_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle1yd_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1ys_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle1ys_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1fzstat_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1fzstat_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1mass_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle1mass_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1damper_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1damper_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1spring_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1spring_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1roll_edit = uicontrol(S.panel_axle_1,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 0.09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
                       
S.trailer_axle1roll_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle1tyres_popupmenu = uicontrol(S.panel_axle_1,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                             
S.trailer_axle1tyres_text = uicontrol(S.panel_axle_1,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');                             
%% Axle 2      

S.trailer_axle2xpos_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2xpos_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2trackwidth_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2trackwidth_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2zrollcenter_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
  
S.trailer_axle2zrollcenter_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2yd_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2yd_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2ys_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2ys_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2fzstat_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2fzstat_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2mass_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
           
S.trailer_axle2mass_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2damper_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
 
S.trailer_axle2damper_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2spring_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2spring_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2roll_edit = uicontrol(S.panel_axle_2,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
 
S.trailer_axle2roll_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle2tyres_popupmenu = uicontrol(S.panel_axle_2,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle2tyres_text = uicontrol(S.panel_axle_2,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');                               
%% Axle 3      

S.trailer_axle3xpos_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle3xpos_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3trackwidth_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
   
S.trailer_axle3trackwidth_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3zrollcenter_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
   
S.trailer_axle3zrollcenter_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3yd_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
     
S.trailer_axle3yd_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3ys_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
       
S.trailer_axle3ys_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3fzstat_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
      
S.trailer_axle3fzstat_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3mass_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
           
S.trailer_axle3mass_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3damper_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
           
S.trailer_axle3damper_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3spring_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
  
S.trailer_axle3spring_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3roll_edit = uicontrol(S.panel_axle_3,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
             
S.trailer_axle3roll_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle3tyres_popupmenu = uicontrol(S.panel_axle_3,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
          
S.trailer_axle3tyres_text = uicontrol(S.panel_axle_3,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize',7,...
                           'FontUnits','Normalized');  

%% Axle 4

S.trailer_axle4xpos_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                           'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle4xpos_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle4trackwidth_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                 'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle4trackwidth_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4zrollcenter_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                              
S.trailer_axle4zrollcenter_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4yd_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle4yd_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4ys_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle4ys_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4fzstat_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4fzstat_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4mass_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle4mass_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4damper_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4damper_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4spring_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4spring_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4roll_edit = uicontrol(S.panel_axle_4,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 0.09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
                       
S.trailer_axle4roll_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle4tyres_popupmenu = uicontrol(S.panel_axle_4,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                             
S.trailer_axle4tyres_text = uicontrol(S.panel_axle_4,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');   
                       
%% Axle 5

S.trailer_axle5xpos_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .9 .3 .065],...
                           'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle5xpos_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.9 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','X position (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle5trackwidth_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.6 .81 .3 .065],...
                                 'FontSize',7,...
                           'FontUnits','Normalized');

S.trailer_axle5trackwidth_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.81 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Distance ''D'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5zrollcenter_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                                  'Units','normalized',...
                                  'Position',[.6 .72 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                              
S.trailer_axle5zrollcenter_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.72 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll center Z position(m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5yd_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .63 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle5yd_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.63 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw dampers (m)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5ys_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                         'Units','normalized',...
                         'Position',[.6 .54 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                     
S.trailer_axle5ys_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.54 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Y distance btw springs (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5fzstat_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .45 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5fzstat_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Initial load (N)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5mass_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 .36 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                       
S.trailer_axle5mass_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.36 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Mass excl wheels/tyres (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5damper_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .27 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5damper_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.27 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Damper constant (Ns/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5spring_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                             'Units','normalized',...
                             'Position',[.6 .18 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5spring_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.18 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Spring stiffness (N/m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5roll_edit = uicontrol(S.panel_axle_5,'Style','edit',...
                           'Units','normalized',...
                           'Position',[.6 0.09 .3 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');  
                       
S.trailer_axle5roll_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.09 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Roll stiffness (Nm/rad)',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');
                         
S.trailer_axle5tyres_popupmenu = uicontrol(S.panel_axle_5,'Style','popupmenu',...
                                 'String',filelist,...
                                 'Units','Normalized',...
                                 'Position',[0.6 0 0.35 .065],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');
                             
S.trailer_axle5tyres_text = uicontrol(S.panel_axle_5,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.065],...
                             'backgroundcolor','w',...
                             'String','Tyres',...
                             'FontSize', 7,...
                           'FontUnits','Normalized');   
                       
%% chassis

S.trailer_chassislenght_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                 'Units','normalized',...
                                 'Position',[.65 .9 .3 .06],...
                                 'FontSize',7,...
                           'FontUnits','Normalized'); 
                                
S.trailer_chassislenght_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.85 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''G'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_chassisheight_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .8 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_chassisheight_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.75 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''H'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_chassiswidth_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .7 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_chassiswidth_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.65 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''I'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_chassismass_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .6 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_chassismass_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.55 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Mass (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');
                         
S.trailer_ftoconn_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .5 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_ftoconn_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''J'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 
                         
S.trailer_dbmass_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .4 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 
                              
S.trailer_dbmass_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.35 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Draw bar mass (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                               
                              
S.trailer_connectionxpos_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .3 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized'); 
                              
S.trailer_connectionxpos_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.25 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''M'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                               
                              
S.trailer_connectionzpos_edit = uicontrol(S.chassis_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.65 .2 .3 .06],...
                                  'FontSize',7,...
                           'FontUnits','Normalized');                               

S.trailer_connectionzpos_text = uicontrol(S.chassis_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.15 0.45 0.1],...
                             'backgroundcolor','w',...
                             'String','Distance ''N'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');                               
%% load

S.trailer_loadlenght_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 .85 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_loadlenght_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.75 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Distance ''K'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');   
                         
S.trailer_loadwidth_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 .7 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized');
 
S.trailer_loadwidth_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.6 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Distance ''L'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');   
                         
S.trailer_loadrho_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 .55 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 

S.trailer_loadrho_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.45 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Rho (kg/m^3)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');   
                         
S.trailer_loadmass_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 .4 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized');
  
S.trailer_loadmass_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.3 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Mass (kg)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');   
                         
S.trailer_loadzcoord_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 0.25 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 
  
S.trailer_loadzcoord_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0.15 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Distance ''O'' (m)',...
                             'FontSize',7,...
                           'FontUnits','Normalized');   
                         
S.trailer_cgratio_edit = uicontrol(S.load_panel,'Style','edit',...
                                    'Units','normalized',...
                                    'Position',[.7 0.1 .2 .1],...
                             'FontSize',7,...
                           'FontUnits','Normalized');   

S.trailer_cgratio_text = uicontrol(S.load_panel,'Style','text',...
                             'Units','Normalized',...
                             'Position',[0.1 0 0.45 0.2],...
                             'backgroundcolor','w',...
                             'String','Center of Gravity Ratio',...
                             'FontSize',7,...
                           'FontUnits','Normalized'); 

global a t2
a=0;
if t2==5 
    set(S.trailer_axle1_radiobutton,'Enable','off')
    set(S.trailer_axle5_radiobutton,'Enable','off')
elseif t2==6
    set(S.trailer_axle5_radiobutton,'Enable','off')
end

set(S.f,'visible','on');                
pause(1)
figure(S.f)
robot = java.awt.Robot; 
robot.keyPress(java.awt.event.KeyEvent.VK_ALT);      %// send ALT
robot.keyPress(java.awt.event.KeyEvent.VK_SPACE);    %// send SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_SPACE);  %// release SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_ALT);    %// release ALT
robot.keyPress(java.awt.event.KeyEvent.VK_X);        %// send X
robot.keyRelease(java.awt.event.KeyEvent.VK_X);      %// release X

% --- Executes on button press in apply_button.
function applynumofaxles_button_call(source, eventdata)
global start_window S
start_window=0;
global p2name a axle_trailer axle_dolly d name name2 p t2 trailer_code

set(S.next_dolly_button,'visible','on');

if (get(S.trailer_axle1_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle1_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=1;
    d=1;
elseif (get(S.trailer_axle1_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle2_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=1;
    d=2;
elseif (get(S.trailer_axle2_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle1_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=2;
    d=1;
elseif (get(S.trailer_axle2_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle2_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=2;
    d=2;
elseif (get(S.trailer_axle3_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle1_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=3;
    d=1;
elseif (get(S.trailer_axle3_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle2_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=3;
    d=2;
elseif (get(S.trailer_axle4_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle1_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=4;
    d=1;
elseif (get(S.trailer_axle4_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle2_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=4;
    d=2;
elseif (get(S.trailer_axle5_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle1_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=5;
    d=1;
elseif (get(S.trailer_axle5_radiobutton,'Value') == get(S.trailer_axle1_radiobutton,'Max'))&&(get(S.dollaxle2_radiobutton,'Value') == get(S.dollaxle1_radiobutton,'Max'))
    a=5;
    d=2;
end
axle_dolly(p)=d;
axle_trailer(p)=a;
trailer_code(p)=t2; %Indicates the type of trailer

    S.axes1 = axes('Position',[0.1 0.6 0.35 0.35],...
                 'Units','Normalized','visible','off');  
    S.axes2 = axes('Position',[0.45 0.6 0.35 0.35],...
                'Units','Normalized','visible','off');
            
if d==1
    p2name = 'DY1';
    axes(S.axes1);
    bg = imread('doll_1a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes2);
    bg = imread('doll_1a_dim2.bmp');
    image(bg);
    axis off;
    set(S.dolly_axle2_panel,'Visible','Off')
    name2='dolly_1axles';
elseif d==2
    p2name = 'DY2';
    axes(S.axes1);
    bg = imread('doll_2a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes2);
    bg = imread('doll_2a_dim2.bmp');
    image(bg);
    axis off;
    name2='dolly_2axles';
end

set(S.dollyaxles_panel,'visible','on');
set(S.dollychassis_panel,'visible','on');
set(S.axlesnumberdoll_panel,'visible','off');
set(S.axlesnumber_panel,'visible','off');
set(S.applyconfig_button,'visible','off');

valaxle=3;
set(S.trailer_axle1tyres_popupmenu,'Value',valaxle);
set(S.trailer_axle2tyres_popupmenu,'Value',valaxle);
set(S.trailer_axle3tyres_popupmenu,'Value',valaxle);
set(S.trailer_axle4tyres_popupmenu,'Value',valaxle);
set(S.trailer_axle5tyres_popupmenu,'Value',valaxle);

Trailer_doll_initialize %put values in edit boxes

function Next_dolly_callback(source, eventdata)
global a name t2 S p2name

S.axes3 = axes('Position',[0.1 0.6 0.35 0.35],...
             'Units','Normalized');  
S.axes4 = axes('Position',[0.45 0.6 0.35 0.35],...
            'Units','Normalized');   
            
%Semi-trailer without kingpin
if t2==2 && a==1
    p2name = [p2name,'_ST1'];
    axes(S.axes3);
    bg = imread('semitrailer_1a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer_1a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','Off')
    set(S.panel_axle_3,'Visible','Off')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_1axles';
elseif t2==2 && a==2
    p2name = [p2name,'_ST2'];
    axes(S.axes3);
    bg = imread('semitrailer_2a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer_2a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','Off')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_2axles';
elseif t2==2 && a==3
    p2name = [p2name,'_ST3'];
    axes(S.axes3);
    bg = imread('semitrailer_3a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer_3a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','On')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_3axles';
elseif t2==2 && a==4
    p2name = [p2name,'_ST4'];
    axes(S.axes3);
    bg = imread('semitrailer_4a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer_4a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','On')
    set(S.panel_axle_4,'Visible','On')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_4axles';
elseif t2==2 && a==5
    p2name = [p2name,'_ST5'];
    axes(S.axes3);
    bg = imread('semitrailer_5a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer_5a_dim2.bmp');
    image(bg);
    axis off;
    name='semitrailer_5axles';
%Semi-trailer with kingpin
elseif t2==4 && a==1
    p2name = [p2name,'_LT1'];
    axes(S.axes3);
    bg = imread('semitrailer+kingpin_1a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer+kingpin_1a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','Off')
    set(S.panel_axle_3,'Visible','Off')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_1axles';
elseif t2==4 && a==2
    p2name = [p2name,'_LT2'];
    axes(S.axes3);
    bg = imread('semitrailer+kingpin_2a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer+kingpin_2a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','Off')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5 ,'Visible','Off')
    name='semitrailer_2axles';
elseif t2==4 && a==3
    p2name = [p2name,'_LT3'];
    axes(S.axes3);
    bg = imread('semitrailer+kingpin_3a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer+kingpin_3a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','On')
    set(S.panel_axle_4,'Visible','Off')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_3axles';
elseif t2==4 && a==4
    p2name = [p2name,'_LT4'];
    axes(S.axes3);
    bg = imread('semitrailer+kingpin_4a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer+kingpin_4a_dim2.bmp');
    image(bg);
    axis off;
    set(S.panel_axle_1,'Visible','On')
    set(S.panel_axle_2,'Visible','On')
    set(S.panel_axle_3,'Visible','On')
    set(S.panel_axle_4,'Visible','On')
    set(S.panel_axle_5,'Visible','Off')
    name='semitrailer_4axles';
elseif t2==4 && a==5
    p2name = [p2name,'_LT5'];
    axes(S.axes3);
    bg = imread('semitrailer+kingpin_5a_dim1.bmp');
    image(bg);
    axis off;
    axes(S.axes4);
    bg = imread('semitrailer+kingpin_5a_dim2.bmp');
    image(bg);
    axis off;
    name='semitrailer_5axles';
end

set(S.dollyaxles_panel,'Visible','Off')
set(S.dollychassis_panel,'Visible','Off')
set(S.panel_axles,'Visible','On')
set(S.chassis_panel,'Visible','On')
set(S.load_panel,'Visible','On')
set(S.next_dolly_button,'Visible','Off')
set(S.next_button,'Visible','On')

function Back_callback(source,eventdata)   

hWait = figure('NumberTitle','off','Name','LHV Tool',...
             'color','w','toolbar','none','menubar','none','Units','Normalized',...
             'Position',[0.2 0.15 0.8 0.75]);  
pause(0.5)         
robot = java.awt.Robot; 
robot.keyPress(java.awt.event.KeyEvent.VK_ALT);      %// send ALT
robot.keyPress(java.awt.event.KeyEvent.VK_SPACE);    %// send SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_SPACE);  %// release SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_ALT);    %// release ALT
robot.keyPress(java.awt.event.KeyEvent.VK_X);        %// send X
robot.keyRelease(java.awt.event.KeyEvent.VK_X);      %// release X         
         
iconsClassName = 'com.mathworks.widgets.BusyAffordance$AffordanceSize';
iconsSizeEnums = javaMethod('values',iconsClassName);
SIZE_32x32 = iconsSizeEnums(2);  % (1) = 16x16,  (2) = 32x32
jObj = com.mathworks.widgets.BusyAffordance(SIZE_32x32, 'Please wait...');  % icon, label
jObj.setPaintsWhenStopped(true);  % default = false
jObj.useWhiteDots(false);         % default = false (true is good for dark backgrounds)
javacomponent(jObj.getComponent, [850,500,200,100], hWait);
jObj.start;     
pause(1)
closereq
default_pre_processor_hauling     
jObj.stop;
close(hWait)

function Next_callback(source,eventdata)
global S

    %% CREATING MAXIMIZED WAIT SCREEN
S.hWait = figure('NumberTitle','off','Name','LHV Tool',...
             'color','w','toolbar','none','menubar','none','Units','Normalized',...
             'Position',[0.2 0.15 0.8 0.75]);  

% MAXIMIZE WINDOW
pause(0.5)         
robot = java.awt.Robot; 
robot.keyPress(java.awt.event.KeyEvent.VK_ALT);      %// send ALT
robot.keyPress(java.awt.event.KeyEvent.VK_SPACE);    %// send SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_SPACE);  %// release SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_ALT);    %// release ALT
robot.keyPress(java.awt.event.KeyEvent.VK_X);        %// send X
robot.keyRelease(java.awt.event.KeyEvent.VK_X);      %// release X         
         
% EXECUTE JAVA OBJECT
iconsClassName = 'com.mathworks.widgets.BusyAffordance$AffordanceSize';
iconsSizeEnums = javaMethod('values',iconsClassName);
SIZE_32x32 = iconsSizeEnums(2);  % (1) = 16x16,  (2) = 32x32
jObj = com.mathworks.widgets.BusyAffordance(SIZE_32x32, 'Please wait...');  % icon, label
jObj.setPaintsWhenStopped(true);  % default = false
jObj.useWhiteDots(false);         % default = false (true is good for dark backgrounds)
javacomponent(jObj.getComponent, [850,500,200,100], S.hWait);
jObj.start;     
pause(1)

global start_window
start_window=0;
global a c d dolly_name trailer_code file_name p name name2 name_buffer trailer_name truck_name x1 x2 t2

if t2==2 && a==4
    A=str2double(get(S.trailer_axle1xpos_edit,'String')); % [m]
    B=str2double(get(S.trailer_axle2xpos_edit,'String')); % [m]
    K=str2double(get(S.trailer_chassislenght_edit,'String')); % [m]
    J=str2double(get(S.trailer_ftoconn_edit,'String')); % [m]

    if (J+A)<(K/2)
        name='semitrailer_41axles';
        trailer_code(p)=21; %Indicates the type of trailer
    end
    if (J+A+B)<(K/2)
        name='semitrailer_42axles';
        trailer_code(p)=22; %Indicates the type of trailer
    end
end    
if t2==2 && a==5
    A=str2double(get(S.trailer_axle1xpos_edit,'String')); % [m]
    B=str2double(get(S.trailer_axle2xpos_edit,'String')); % [m]
    K=str2double(get(S.trailer_chassislenght_edit,'String')); % [m]
    J=str2double(get(S.trailer_ftoconn_edit,'String')); % [m]

    if (J+A)<(K/2)
        name='semitrailer_51axles';
        trailer_code(p)=21; %Indicates the type of trailer
    end
    if (J+A+B)<(K/2)
        name='semitrailer_52axles';
        trailer_code(p)=22; %Indicates the type of trailer
    end
end    

dolly_name=strcat(name2,num2str(p));
trailer_name=strcat(name,num2str(p));
load_system(strcat(file_name))
load_system('trucklib')
%% Add user defined subsystems to the simulation model
% Dolly -------------------------------------------------------------------
if p==1
    x1=470;
    x2=580;
    conn_out=get_param(strcat(file_name,'/',truck_name),'PortHandles');
else
    x1=x2+150;
    x2=x1+110;
    conn_out=get_param(strcat(file_name,'/',name_buffer),'PortHandles');
end
y1=260;
y2=350;
add_block(strcat('trucklib/',name2), strcat(file_name,'/',dolly_name),'Position', [x1 y1 x2 y2] )
add_line(strcat(file_name),strcat(truck_name,'/3'),strcat(dolly_name,'/1'),'autorouting','on')
conn_in=get_param(strcat(file_name,'/',dolly_name),'PortHandles');
add_line(strcat(file_name),conn_out.RConn(1),conn_in.LConn(1),'autorouting','on');

% VR ToWorkspace ---------------------------------------------------------
x1_VR=x2+30;
y1_VR=y1+35;
x2_VR=x1_VR+70;
y2_VR=y1_VR+20;
add_block('built-in/ToWorkspace',strcat(file_name,'/VRDolly',num2str(p)),'Position', [x1_VR y1_VR x2_VR y2_VR])
set_param(strcat(file_name,'/VRDolly',num2str(p)),'VariableName',strcat('VR_dolly',num2str(p)),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Structure With Time')
add_line(strcat(file_name),strcat(dolly_name,'/2'),strcat('VRDolly',num2str(p),'/1'),'autorouting','on')

% Data ToWorkspace--------------------------------------------------------
x1_data=x2+30;
y1_data=y1;
x2_data=x1_data+70;
y2_data=y1_data+20;
add_block('built-in/Subsystem',strcat(file_name,'/To_workspace_dolly_',num2str(p)),'Position', [x1_data y1_data x2_data y2_data])
add_block('built-in/Inport',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/In1'),'Position', [10 235 30 255])
add_line(strcat(file_name),strcat(dolly_name,'/1'),strcat('To_workspace_dolly_',num2str(p),'/1'),'autorouting','on')

    %Tyres, longitudinal forces
if d==1
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx';
elseif d==2
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx,axle2.tyre1.Fx,axle2.tyre2.Fx';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select1'),'Position', [70 30 75 60])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select1/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select1'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fx'),'Position', [170 30 270 60])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fx'),'VariableName',strcat('s_tyre_dolly',num2str(p),'Fx'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select1/1','Tyres_Fx/1')

    %Tyres, lateral forces
if d==1
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy';
elseif d==2
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy,axle2.tyre1.Fy,axle2.tyre2.Fy';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select2'),'Position', [70 80 75 110])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select2/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select2'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fy'),'Position', [170 80 270 110])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fy'),'VariableName',strcat('s_tyre_dolly',num2str(p),'Fy'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select2/1','Tyres_Fy/1')

    %Tyres, vertical forces
if d==1
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz';
elseif d==2
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz,axle2.tyre1.Fz,axle2.tyre2.Fz';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select3'),'Position', [70 130 75 160])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select3/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select3'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fz'),'Position', [170 130 270 160])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_Fz'),'VariableName',strcat('s_tyre_dolly',num2str(p),'Fz'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select3/1','Tyres_Fz/1')

    %Tyres, rotation velocity
if d==1
    tyre_list='axle1.omega1,axle1.omega2';
elseif d==2
    tyre_list='axle1.omega1,axle1.omega2,axle2.omega1,axle2.omega2';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select4'),'Position', [70 180 75 210])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select4/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select4'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_omega'),'Position', [170 180 270 210])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/Tyres_omega'),'VariableName',strcat('s_dolly',num2str(p),'_omega'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select4/1','Tyres_omega/1')

    %Acceleration of axle 1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select5'),'Position', [70 280 75 310])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select5/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select5'),'OutputSignals','axle1.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/acceleration_a1'),'Position', [170 280 270 310])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/acceleration_a1'),'VariableName',strcat('s_dolly',num2str(p),'axle1_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select5/1','acceleration_a1/1')

    %Acceleration of axle 2
if d==2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select6'),'Position', [70 330 75 360])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select6/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select6'),'OutputSignals','axle2.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/acceleration_a2'),'Position', [170 330 270 360])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/acceleration_a2'),'VariableName',strcat('s_dolly',num2str(p),'axle2_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select6/1','acceleration_a2/1')
end

    %yawrate
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select14'),'Position', [70 400 75 430])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select14/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select14'),'OutputSignals','yawrate')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/yawrate'),'Position', [170 400 270 430])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/yawrate'),'VariableName',strcat('s_dolly',num2str(p),'_yawrate'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select14/1','yawrate/1')

    %Position of axle 1
if d>=1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select15'),'Position', [70 450 75 480])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select15/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select15'),'OutputSignals','axle1.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/position_a1'),'Position', [170 450 270 480])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/position_a1'),'VariableName',strcat('s_dolly',num2str(p),'axle1_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select15/1','position_a1/1')
end

    %Position of axle 2
if d==2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select16'),'Position', [70 500 75 530])
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'In1/1','select16/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/select16'),'OutputSignals','axle2.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_dolly_',num2str(p),'/position_a2'),'Position', [170 500 270 530])
set_param(strcat(file_name,'/To_workspace_dolly_',num2str(p),'/position_a2'),'VariableName',strcat('s_dolly',num2str(p),'axle2_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_dolly_',num2str(p)),'select16/1','position_a2/1')
end

% Trailer -------------------------------------------------------------------
x1=x2+150;
x2=x1+110;
conn_out=get_param(strcat(file_name,'/',dolly_name),'PortHandles');
y1=210;
y2=300;
add_block(strcat('trucklib/',name), strcat(file_name,'/',trailer_name),'Position', [x1 y1 x2 y2] )
add_line(strcat(file_name),strcat(truck_name,'/3'),strcat(trailer_name,'/1'),'autorouting','on')
conn_in=get_param(strcat(file_name,'/',trailer_name),'PortHandles');
add_line(strcat(file_name),conn_out.RConn(1),conn_in.LConn(1),'autorouting','on');

% VR ToWorkspace ---------------------------------------------------------
x1_VR=x2+30;
y1_VR=y1+35;
x2_VR=x1_VR+70;
y2_VR=y1_VR+20;
add_block('built-in/ToWorkspace',strcat(file_name,'/VRTrailer',num2str(p)),'Position', [x1_VR y1_VR x2_VR y2_VR])
set_param(strcat(file_name,'/VRTrailer',num2str(p)),'VariableName',strcat('VR_trailer',num2str(p)),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Structure With Time')
add_line(strcat(file_name),strcat(trailer_name,'/2'),strcat('VRTrailer',num2str(p),'/1'),'autorouting','on')

% Data ToWorkspace--------------------------------------------------------
x1_data=x2+30;
y1_data=y1;
x2_data=x1_data+70;
y2_data=y1_data+20;
add_block('built-in/Subsystem',strcat(file_name,'/To_workspace_trailer_',num2str(p)),'Position', [x1_data y1_data x2_data y2_data])
add_block('built-in/Inport',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/In1'),'Position', [10 235 30 255])
add_line(strcat(file_name),strcat(trailer_name,'/1'),strcat('To_workspace_trailer_',num2str(p),'/1'),'autorouting','on')

    %Tyres, longitudinal forces
if a==1
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx';
elseif a==2
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx,axle2.tyre1.Fx,axle2.tyre2.Fx';
elseif a==3
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx,axle2.tyre1.Fx,axle2.tyre2.Fx,axle3.tyre1.Fx,axle3.tyre2.Fx';
elseif a==4
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx,axle2.tyre1.Fx,axle2.tyre2.Fx,axle3.tyre1.Fx,axle3.tyre2.Fx,axle4.tyre1.Fx,axle4.tyre2.Fx';
elseif a==5
    tyre_list='axle1.tyre1.Fx,axle1.tyre2.Fx,axle2.tyre1.Fx,axle2.tyre2.Fx,axle3.tyre1.Fx,axle3.tyre2.Fx,axle4.tyre1.Fx,axle4.tyre2.Fx,axle5.tyre1.Fx,axle5.tyre2.Fx';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select1'),'Position', [70 30 75 60])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select1/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select1'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fx'),'Position', [170 30 270 60])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fx'),'VariableName',strcat('s_tyre_trailer',num2str(p),'Fx'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select1/1','Tyres_Fx/1')

    %Tyres, lateral forces
if a==1
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy';
elseif a==2
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy,axle2.tyre1.Fy,axle2.tyre2.Fy';
elseif a==3
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy,axle2.tyre1.Fy,axle2.tyre2.Fy,axle3.tyre1.Fy,axle3.tyre2.Fy';
elseif a==4
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy,axle2.tyre1.Fy,axle2.tyre2.Fy,axle3.tyre1.Fy,axle3.tyre2.Fy,axle4.tyre1.Fy,axle4.tyre2.Fy';
elseif a==5
    tyre_list='axle1.tyre1.Fy,axle1.tyre2.Fy,axle2.tyre1.Fy,axle2.tyre2.Fy,axle3.tyre1.Fy,axle3.tyre2.Fy,axle4.tyre1.Fy,axle4.tyre2.Fy,axle5.tyre1.Fy,axle5.tyre2.Fy';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select2'),'Position', [70 80 75 110])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select2/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select2'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fy'),'Position', [170 80 270 110])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fy'),'VariableName',strcat('s_tyre_trailer',num2str(p),'Fy'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select2/1','Tyres_Fy/1')

    %Tyres, vertical forces
if a==1
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz';
elseif a==2
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz,axle2.tyre1.Fz,axle2.tyre2.Fz';
elseif a==3
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz,axle2.tyre1.Fz,axle2.tyre2.Fz,axle3.tyre1.Fz,axle3.tyre2.Fz';
elseif a==4
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz,axle2.tyre1.Fz,axle2.tyre2.Fz,axle3.tyre1.Fz,axle3.tyre2.Fz,axle4.tyre1.Fz,axle4.tyre2.Fz';
elseif a==5
    tyre_list='axle1.tyre1.Fz,axle1.tyre2.Fz,axle2.tyre1.Fz,axle2.tyre2.Fz,axle3.tyre1.Fz,axle3.tyre2.Fz,axle4.tyre1.Fz,axle4.tyre2.Fz,axle5.tyre1.Fz,axle5.tyre2.Fz';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select3'),'Position', [70 130 75 160])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select3/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select3'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fz'),'Position', [170 130 270 160])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_Fz'),'VariableName',strcat('s_tyre_trailer',num2str(p),'Fz'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select3/1','Tyres_Fz/1')

    %Tyres, rotation velocity
if a==1
    tyre_list='axle1.omega1,axle1.omega2';
elseif a==2
    tyre_list='axle1.omega1,axle1.omega2,axle2.omega1,axle2.omega2';
elseif a==3
    tyre_list='axle1.omega1,axle1.omega2,axle2.omega1,axle2.omega2,axle3.omega1,axle3.omega2';
elseif a==4
    tyre_list='axle1.omega1,axle1.omega2,axle2.omega1,axle2.omega2,axle3.omega1,axle3.omega2,axle4.omega1,axle4.omega2';
elseif a==5
    tyre_list='axle1.omega1,axle1.omega2,axle2.omega1,axle2.omega2,axle3.omega1,axle3.omega2,axle4.omega1,axle4.omega2,axle5.omega1,axle5.omega2';
end
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select4'),'Position', [70 180 75 210])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select4/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select4'),'OutputSignals',tyre_list,'OutputAsBus','On')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_omega'),'Position', [170 180 270 210])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/Tyres_omega'),'VariableName',strcat('s_trailer',num2str(p),'_omega'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select4/1','Tyres_omega/1')

    %Acceleration of axle 1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select5'),'Position', [70 280 75 310])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select5/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select5'),'OutputSignals','axle1.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a1'),'Position', [170 280 270 310])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a1'),'VariableName',strcat('s_trailer',num2str(p),'axle1_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select5/1','acceleration_a1/1')

    %Acceleration of axle 2
if a>=2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select6'),'Position', [70 330 75 360])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select6/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select6'),'OutputSignals','axle2.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a2'),'Position', [170 330 270 360])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a2'),'VariableName',strcat('s_trailer',num2str(p),'axle2_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select6/1','acceleration_a2/1')
end

    %Acceleration of axle 3
if a>=3
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select7'),'Position', [70 380 75 410])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select7/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select7'),'OutputSignals','axle3.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a3'),'Position', [170 380 270 410])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a3'),'VariableName',strcat('s_trailer',num2str(p),'axle3_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select7/1','acceleration_a3/1')
end

    %Acceleration of axle 4
if a>=4
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select28'),'Position', [70 1200 75 1230])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select28/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select28'),'OutputSignals','axle4.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a4'),'Position', [170 1200 270 1230])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a4'),'VariableName',strcat('s_trailer',num2str(p),'axle4_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select28/1','acceleration_a4/1')
end

    %Acceleration of axle 5
if a==5
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select32'),'Position', [70 1400 75 1430])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select32/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select32'),'OutputSignals','axle5.traileraxle_acc')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a5'),'Position', [170 1400 270 1430])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_a5'),'VariableName',strcat('s_trailer',num2str(p),'axle5_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select32/1','acceleration_a5/1')
end

    %yawrate
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select14'),'Position', [70 500 75 530])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select14/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select14'),'OutputSignals','yawrate')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/yawrate'),'Position', [170 500 270 530])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/yawrate'),'VariableName',strcat('s_trailer',num2str(p),'_yawrate'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select14/1','yawrate/1')

    %Position of axle 1
if a==1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select15'),'Position', [70 550 75 580])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select15/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select15'),'OutputSignals','axle1.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a1'),'Position', [170 550 270 580])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a1'),'VariableName',strcat('s_trailer',num2str(p),'axle1_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select15/1','position_a1/1')
end

    %Position of axle 2
if a==2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select16'),'Position', [70 600 75 630])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select16/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select16'),'OutputSignals','axle2.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a2'),'Position', [170 600 270 630])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a2'),'VariableName',strcat('s_trailer',num2str(p),'axle2_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select16/1','position_a2/1')
end

    %Position of axle 3
if a==3
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select17'),'Position', [70 650 75 680])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select17/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select17'),'OutputSignals','axle3.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a3'),'Position', [170 650 270 680])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a3'),'VariableName',strcat('s_trailer',num2str(p),'axle3_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select17/1','position_a3/1')
end

    %Position of axle 4
if a==4
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select29'),'Position', [70 650 75 680])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select29/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select29'),'OutputSignals','axle4.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a4'),'Position', [170 650 270 680])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a4'),'VariableName',strcat('s_trailer',num2str(p),'axle4_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select29/1','position_a4/1')
end

    %Position of axle 5
if a==5
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select33'),'Position', [70 1450 75 1480])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select33/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select33'),'OutputSignals','axle5.traileraxle_pos')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a5'),'Position', [170 1450 270 1480])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/position_a5'),'VariableName',strcat('s_trailer',num2str(p),'axle5_pos'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select33/1','position_a5/1')
end

    %Position - left of axle 1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select18'),'Position', [70 700 75 730])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select18/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select18'),'OutputSignals','axle1.traileraxle_posleft')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a1'),'Position', [170 700 270 730])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a1'),'VariableName',strcat('s_trailer',num2str(p),'axle1_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select18/1','positionleft_a1/1')

    %Position - left of axle 2
if a>=2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select19'),'Position', [70 750 75 780])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select19/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select19'),'OutputSignals','axle2.traileraxle_posleft')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a2'),'Position', [170 750 270 780])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a2'),'VariableName',strcat('s_trailer',num2str(p),'axle2_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select19/1','positionleft_a2/1')
end

    %Position - left of axle 3
if a>=3
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select20'),'Position', [70 800 75 830])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select20/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select20'),'OutputSignals','axle3.traileraxle_posleft')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a3'),'Position', [170 800 270 830])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a3'),'VariableName',strcat('s_trailer',num2str(p),'axle3_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select20/1','positionleft_a3/1')
end

    %Position - left of axle 4
if a>=4
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select30'),'Position', [70 1300 75 1330])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select30/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select30'),'OutputSignals','axle4.traileraxle_posleft')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a4'),'Position', [170 1300 270 1330])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a4'),'VariableName',strcat('s_trailer',num2str(p),'axle4_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select30/1','positionleft_a4/1')
end

    %Position - left of axle 5
if a==5
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select34'),'Position', [70 1500 75 1530])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select34/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select34'),'OutputSignals','axle5.traileraxle_posleft')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a5'),'Position', [170 1500 270 1530])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionleft_a5'),'VariableName',strcat('s_trailer',num2str(p),'axle5_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select34/1','positionleft_a5/1')
end

    %Position - right of axle 1
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select21'),'Position', [70 850 75 880])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select21/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select21'),'OutputSignals','axle1.traileraxle_posright')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a1'),'Position', [170 850 270 880])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a1'),'VariableName',strcat('s_trailer',num2str(p),'axle1_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select21/1','positionright_a1/1')

    %Position - right of axle 2
if a>=2
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select22'),'Position', [70 900 75 930])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select22/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select22'),'OutputSignals','axle2.traileraxle_posright')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a2'),'Position', [170 900 270 930])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a2'),'VariableName',strcat('s_trailer',num2str(p),'axle2_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select22/1','positionright_a2/1')
end

    %Position - right of axle 3
if a>=3
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select23'),'Position', [70 950 75 980])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select23/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select23'),'OutputSignals','axle3.traileraxle_posright')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a3'),'Position', [170 950 270 980])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a3'),'VariableName',strcat('s_trailer',num2str(p),'axle3_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select23/1','positionright_a3/1')
end

    %Position - right of axle 4
if a>=4
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select31'),'Position', [70 1350 75 1380])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select31/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select31'),'OutputSignals','axle4.traileraxle_posright')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a4'),'Position', [170 1350 270 1380])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a4'),'VariableName',strcat('s_trailer',num2str(p),'axle4_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select31/1','positionright_a4/1')
end

    %Position - right of axle 5
if a==5
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select35'),'Position', [70 1550 75 1580])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select35/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select35'),'OutputSignals','axle5.traileraxle_posright')
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a5'),'Position', [170 1550 270 1580])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/positionright_a5'),'VariableName',strcat('s_trailer',num2str(p),'axle5_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select35/1','positionright_a5/1')
end

    %Acceleration of load
add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select8'),'Position', [70 430 75 460])
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select8/1','autorouting','on')
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select8'),'OutputSignals','semitrailerload1.loadcenter_acc')    
add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_load'),'Position', [170 430 270 460])
set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/acceleration_load'),'VariableName',strcat('s_trailer',num2str(p),'load_acc'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select8/1','acceleration_load/1')

    %Position front semitrailer
if t2==2 || t2==4
        %Position front semitrailer right
    add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select24'),'Position', [70 1000 75 1030])
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select24/1','autorouting','on')
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select24'),'OutputSignals','frontright_position')
    add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/semi_right'),'Position', [170 1000 270 1030])
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/semi_right'),'VariableName',strcat('s_trailer',num2str(p),'semi_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select24/1','semi_right/1')

         %Position front semitrailer left
    add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select25'),'Position', [70 1050 75 1080])
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select25/1','autorouting','on')
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select25'),'OutputSignals','frontleft_position')
    add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/semi_left'),'Position', [170 1050 270 1080])
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/semi_left'),'VariableName',strcat('s_trailer',num2str(p),'semi_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select25/1','semi_left/1')
end

    %Position tail 
if t2==2 || t2==4 %semitrailer
        %Position tail right
    add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select26'),'Position', [70 1100 75 1130])
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select26/1','autorouting','on')
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select26'),'OutputSignals','semitrailerload2.tail_positionright')
    add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/tail_right'),'Position', [170 1100 270 1130])
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/tail_right'),'VariableName',strcat('s_trailer',num2str(p),'_load_posright'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select26/1','tail_right/1')
         %Position tail left
    add_block('built-in/BusSelector',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select27'),'Position', [70 1150 75 1180])
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'In1/1','select27/1','autorouting','on')
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/select27'),'OutputSignals','semitrailerload2.tail_positionleft')
    add_block('built-in/ToWorkspace',strcat(file_name,'/To_workspace_trailer_',num2str(p),'/tail_left'),'Position', [170 1150 270 1180])
    set_param(strcat(file_name,'/To_workspace_trailer_',num2str(p),'/tail_left'),'VariableName',strcat('s_trailer',num2str(p),'_load_posleft'),'MaxDataPoints','inf','Decimation','1','SampleTime','-1','SaveFormat','Array','BackgroundColor','Orange')
    add_line(strcat(file_name,'/To_workspace_trailer_',num2str(p)),'select27/1','tail_left/1')
end

fill_in_trailer_doll_model

save_system(file_name)

c=1;
p=p+1;
name_buffer=trailer_name;

closereq
configuration_selection

jObj.stop;